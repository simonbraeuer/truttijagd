<div class="game-container">
  <div *ngIf="!gameStarted" class="start-screen">
    <h2>Trutti Hunt</h2>
    <p>Click on turkeys to earn money!</p>
    <ul class="instructions">
      <li>ğŸ¦ƒ Regular Turkeys: +$10</li>
      <li>â­ Special Truttis (1-9): +$50 each</li>
      <li>ğŸ‘™ Bikini Girls: -$50 penalty (Don't photograph!)</li>
      <li>ğŸ’• Bikini Girls in delicate situations: +$100 bonus!</li>
      <li>Catch all 9 Truttis for a +$500 bonus!</li>
      <li>âš ï¸ Game ends when the last Trutti is caught or escapes!</li>
    </ul>
    
    <div class="audio-config">
      <label for="audioUrl">ğŸµ Background Music URL (optional):</label>
      <input 
        id="audioUrl"
        type="text" 
        [(ngModel)]="audioUrl" 
        placeholder="Enter URL to your audio file (e.g., https://example.com/song.mp3)"
        class="audio-input">
      <p class="audio-hint">Provide your own music to avoid licensing issues. Leave empty for no music.</p>
    </div>
    
    <p class="pause-hint">ğŸ’¡ Press <strong>P</strong> or <strong>Pause</strong> key to pause | Press <strong>Escape</strong> to end game</p>
    <button class="start-button" (click)="startGame()">Start Game</button>
  </div>

  <div *ngIf="gameStarted" class="game-area">
    <div class="hud">
      <div class="money-display">ğŸ’° Money: ${{ money }}</div>
      <div class="special-turkeys">
        Truttis Caught: {{ caughtSpecialTurkeys.size }} / 9
      </div>
    </div>
    <div *ngIf="completionMessage" class="completion-message">
      {{ completionMessage }}
    </div>
    
    <!-- Game Over Screen -->
    <div *ngIf="gameOver && !showScoreboard && qualifiesForTop10" class="game-over-overlay">
      <div class="game-over-screen">
        <h2>ğŸ® Game Over! ğŸ®</h2>
        <p class="final-score">Your Score: ${{ money }}</p>
        <p class="truttis-caught">Truttis Caught: {{ caughtSpecialTurkeys.size }} / 9</p>
        <p class="top10-message">ğŸ‰ You made it to the Top 10! ğŸ‰</p>
        
        <div class="name-input-section">
          <label for="playerName">Enter your name for the scoreboard:</label>
          <input 
            id="playerName"
            type="text" 
            [(ngModel)]="playerName" 
            placeholder="Your name"
            (keyup.enter)="saveScore()"
            class="name-input"
            maxlength="20">
          <button class="save-score-button" (click)="saveScore()">Save Score</button>
        </div>
      </div>
    </div>

    <!-- Scoreboard Screen -->
    <div *ngIf="gameOver && showScoreboard" class="scoreboard-overlay">
      <div class="scoreboard-screen">
        <h2>ğŸ† High Scores ğŸ†</h2>
        <div class="scoreboard-list">
          <div *ngFor="let entry of scoreboard; let i = index" class="score-entry" [class.current-score]="entry.name === playerName.trim() && entry.score === money">
            <span class="rank">{{ i + 1 }}.</span>
            <span class="name">{{ entry.name }}</span>
            <span class="score">${{ entry.score }}</span>
          </div>
          <div *ngIf="scoreboard.length === 0" class="no-scores">
            No scores yet. Be the first!
          </div>
        </div>
        <button class="start-button" (click)="resetGame()">Back to Menu</button>
      </div>
    </div>
    
    <!-- Pause overlay -->
    <div *ngIf="paused" class="pause-overlay">
      <div class="start-screen pause-screen">
        <h2>â¸ Game Paused</h2>
        <p>Review the rules:</p>
        <ul class="instructions">
          <li>ğŸ¦ƒ Regular Turkeys: +$10</li>
          <li>â­ Special Truttis (1-9): +$50 each</li>
          <li>ğŸ‘™ Bikini Girls: -$50 penalty (Don't photograph!)</li>
          <li>ğŸ’• Bikini Girls in delicate situations: +$100 bonus!</li>
          <li>Catch all 9 Truttis for a +$500 bonus!</li>
        </ul>
        <p class="resume-hint">Press <strong>P</strong> or <strong>Pause</strong> key to resume | Press <strong>Escape</strong> to end game</p>
      </div>
    </div>
    
    <canvas 
      #gameCanvas 
      (click)="onCanvasClick($event)"
      class="game-canvas">
    </canvas>
  </div>
</div>
